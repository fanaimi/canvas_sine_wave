!function(){var a=document.getElementById("c1"),b=a.getContext("2d"),c=a.width,d=a.height,e=null,f=!1,g=1,h=function(a){return a*(Math.PI/180)},i=null,j=[],k=2,l=function(a,b,d,e,f){this.x=a,this.y=b,this.r=4,this.ctx=d,this.waveSpeed=e,this.draw=function(){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.ctx.fillStyle="red",this.ctx.fill(),this.ctx.closePath()},this.move=function(){if(this.x<c+this.r)this.x+=this.waveSpeed;else if(this.x<400||this.x<c+this.r)for(var a in j)j[a]==this&&j.splice(a,1)}};RedDot=function(a,b,c,d,e,f,g,i){this.x=a,this.y=b,this.r=c,this.angle=90,this.ctx=d,this.speedAngle=i,this.draw=function(){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,3,0,2*Math.PI,!0),this.ctx.fillStyle="red",this.ctx.fill(),this.ctx.closePath()},this.move=function(){this.angle+=this.speedAngle,this.x=e+Math.cos(h(this.angle))*g,this.y=f+Math.sin(h(this.angle))*g}},clearCanvas=function(a){a.clearRect(0,0,c,d)},drawC1=function(){b.beginPath(),b.arc(200,200,150,0,2*Math.PI,!0),b.strokeStyle="green",b.lineWidth=2,b.stroke(),b.closePath()},drawCentre=function(){b.beginPath(),b.arc(200,200,3,0,2*Math.PI,!0),b.fillStyle="red",b.fill(),b.closePath()},addRedDot=function(){i=new RedDot(250,50,5,b,200,200,150,g),i.draw()},moveRedDot=function(){i.move(),i.draw()},drawGuide=function(){b.beginPath(),b.moveTo(i.x,i.y),b.lineTo(400,i.y),b.strokeStyle="blue",b.lineWidth=1,b.stroke(),b.beginPath()},drawRadius=function(){b.beginPath(),b.moveTo(200,200),b.lineTo(i.x,i.y),b.strokeStyle="blue",b.lineWidth=1,b.stroke(),b.beginPath()},addNewWaveDot=function(){var a=new l(400,i.y,b,k,400);j.push(a),a.draw()},moveWaveDots=function(){for(var a in j)j[a].move(),j[a].draw()},drawGreyLines=function(){b.beginPath(),b.moveTo(400,0),b.lineTo(400,d),b.moveTo(0,50),b.lineTo(c,50),b.moveTo(0,200),b.lineTo(c,200),b.moveTo(200,0),b.lineTo(200,d),b.moveTo(50,0),b.lineTo(50,d),b.moveTo(350,0),b.lineTo(350,d),b.moveTo(0,350),b.lineTo(c,350),b.strokeStyle="lightgrey",b.lineWidth=1,b.stroke(),b.closePath()},playLoop=function(){clearCanvas(b),drawGreyLines(),drawC1(),drawCentre(),moveRedDot(),drawRadius(),drawGuide(),addNewWaveDot(),moveWaveDots(),e=window.requestAnimationFrame(playLoop)},pauseLoop=function(){console.log("paused"),window.cancelAnimationFrame(e)},bindBtns=function(){document.getElementById("pauseBtn").addEventListener("click",function(){pauseLoop(),f=!0}),document.getElementById("restoreBtn").addEventListener("click",function(){f&&(playLoop(),f=!1)}),document.getElementById("slowAngleBtn").addEventListener("click",function(){i.speedAngle--}),document.getElementById("pauseAngleBtn").addEventListener("click",function(){i.speedAngle=0}),document.getElementById("fastAngleBtn").addEventListener("click",function(){i.speedAngle++}),document.getElementById("slowGridBtn").addEventListener("click",function(){for(var a in j)j[a].waveSpeed--}),document.getElementById("pauseGridBtn").addEventListener("click",function(){for(var a in j)j[a].waveSpeed=0}),document.getElementById("fastGridBtn").addEventListener("click",function(){for(var a in j)j[a].waveSpeed++})},init=function(){addRedDot(),playLoop(),bindBtns()},window.addEventListener("blur",pauseLoop),window.addEventListener("load",init)}();